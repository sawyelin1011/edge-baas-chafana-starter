{
  "name": "blog-api",
  "version": "1.0.0",
  "description": "A blog API with posts, comments, and authors",
  "database": {
    "name": "blog-db",
    "binding": "DB"
  },
  "resources": [
    {
      "name": "authors",
      "description": "Blog post authors",
      "fields": [
        {
          "name": "email",
          "type": "email",
          "required": true,
          "unique": true
        },
        {
          "name": "name",
          "type": "string",
          "required": true,
          "min": 2,
          "searchable": true
        },
        {
          "name": "bio",
          "type": "text"
        },
        {
          "name": "avatar",
          "type": "url"
        },
        {
          "name": "active",
          "type": "boolean",
          "default": true
        }
      ],
      "indexes": [
        {
          "fields": ["email"],
          "unique": true
        },
        {
          "fields": ["active"]
        }
      ],
      "timestamps": {
        "createdAt": true,
        "updatedAt": true
      }
    },
    {
      "name": "posts",
      "description": "Blog posts",
      "fields": [
        {
          "name": "title",
          "type": "string",
          "required": true,
          "min": 3,
          "max": 200,
          "searchable": true
        },
        {
          "name": "slug",
          "type": "string",
          "required": true,
          "unique": true
        },
        {
          "name": "content",
          "type": "text",
          "required": true
        },
        {
          "name": "excerpt",
          "type": "text",
          "max": 500
        },
        {
          "name": "authorId",
          "type": "uuid",
          "required": true,
          "relation": "authors.id"
        },
        {
          "name": "published",
          "type": "boolean",
          "default": false
        },
        {
          "name": "publishedAt",
          "type": "datetime"
        },
        {
          "name": "tags",
          "type": "json",
          "default": "[]"
        },
        {
          "name": "views",
          "type": "integer",
          "default": 0
        }
      ],
      "indexes": [
        {
          "fields": ["authorId"]
        },
        {
          "fields": ["published"]
        },
        {
          "fields": ["slug"],
          "unique": true
        }
      ],
      "timestamps": {
        "createdAt": true,
        "updatedAt": true
      }
    },
    {
      "name": "comments",
      "description": "Comments on blog posts",
      "fields": [
        {
          "name": "postId",
          "type": "uuid",
          "required": true,
          "relation": "posts.id"
        },
        {
          "name": "authorEmail",
          "type": "email",
          "required": true
        },
        {
          "name": "authorName",
          "type": "string",
          "required": true,
          "min": 2
        },
        {
          "name": "content",
          "type": "text",
          "required": true,
          "min": 1,
          "max": 1000
        },
        {
          "name": "approved",
          "type": "boolean",
          "default": false
        }
      ],
      "indexes": [
        {
          "fields": ["postId"]
        },
        {
          "fields": ["approved"]
        }
      ],
      "timestamps": {
        "createdAt": true,
        "updatedAt": true
      }
    }
  ]
}
